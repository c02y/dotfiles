# Rime schema
# encoding: utf-8

# å¤åˆ¶è‡ª rime_ice.schema.yaml ï¼Œé€‚é…äº†åŒæ‹¼ã€‚
# åŒæ‹¼é”®ä½æ˜ å°„å¤åˆ¶è‡ª https://github.com/rime/rime-double-pinyin
# åŒæ‹¼ä¹‹é—´ä¸»è¦å°±æ˜¯ speller/algebra å’Œ translator/preedit_format è¿™é‡Œæœ‰åŒºåˆ«ã€‚
#
# å…¨æ‹¼çš„è‡ªå®šä¹‰æ–‡æœ¬å’ŒåŒæ‹¼æœ‰äº›å†²çªï¼Œæ”¹æˆäº† custom_phrase_double ï¼Œéœ€è¦åˆ›å»º custom_phrase_double.txt æ–‡ä»¶ã€‚
#
# é»˜è®¤å¯ç”¨çš„ä¸­è‹±æ··è¾“è¯åº“æ˜¯å…¨æ‹¼çš„ï¼Œéœ€è¦åœ¨ melt_eng.dict.yaml ä¸­ä¿®æ”¹ä¸ºå¯¹åº”çš„åŒæ‹¼çš„ã€‚
# 1. åˆ é™¤è‡ªé€ è¯ä½¿ç”¨Ctrl-Delete
# 2. æ‹†åˆ†è¾“å…¥ç”Ÿåƒ»å­—ä½¿ç”¨uUå¼€å¤´
# 3. ç®€ç¹ä½“åˆ‡æ¢èœå•ä½¿ç”¨Ctrl-Shift-Space

patch:
  # å¼€å…³
  # é¼ é¡»ç®¡ 0.16 åï¼Œç”¨å¿«æ·é”®åˆ‡æ¢æ—¶çš„æç¤ºæ–‡å­—ç”± states å®šä¹‰
  # states: æ–¹æ¡ˆé€‰å•æ˜¾ç¤ºçš„åç§°ã€‚å¯ä»¥æ³¨é‡Šæ‰ï¼Œä»å¯ä»¥é€šè¿‡å¿«æ·é”®åˆ‡æ¢ã€‚
  # reset: é»˜è®¤çŠ¶æ€ã€‚ æ³¨é‡Šæ‰åï¼Œåˆ‡æ¢çª—å£æ—¶ä¸ä¼šé‡ç½®åˆ°é»˜è®¤çŠ¶æ€ã€‚
  switches/@0:
    # æ³¨æ„nameå‰é¢æ²¡æœ‰åŸç‰ˆé‡Œé¢çš„â€œ-â€ï¼Œä¹Ÿè¦æ³¨æ„åé¢ä¸¤è¡Œçš„ç¼©è¿›
    name: ascii_mode
    states: [ä¸­, A]
    reset: 1
  # switches/@3:
  #   # ç¦ç”¨emoji
  #   name: emoji
  #   states: [ ğŸ’€, ğŸ˜„ ]
  #   reset: 0

  # æ˜¾ç¤ºä¸ºåŒæ‹¼ç¼–ç ï¼Œå³æ¸…ç©º preedit_format ä¸­çš„å†…å®¹
  # translator/preedit_format: []
  #
  translator/dictionary: rime_ice_private

  # userdb
  # https://github.com/iDvel/rime-ice/issues/363
  translator/+:
    db_class: tabledb

  engine/filters/@before 4:
    # https://github.com/iDvel/rime-ice/issues/567
    # https://github.com/iDvel/rime-ice/issues/727
    # long_word_filteræ”¾åˆ°emojiä¹‹å‰é˜²æ­¢emojiæ€»åœ¨å‰é¢
    - lua_filter@long_word_filter
  engine/filters/@after last:
    - lua_filter@cn_en_spacer

  long_word_filter:
    count: 10
    idx: 1

  # æ‹¼å†™è®¾å®š
  speller/algebra:
    # æ¨¡ç³ŠéŸ³
    - abbrev/^([a-z]).+$/$1/ # ç®€æ‹¼ï¼ˆé¦–å­—æ¯ï¼‰
    - abbrev/^([zcs]h).+$/$1/ # ç®€æ‹¼ï¼ˆzh, ch, shï¼‰
    - derive/^([zcs])h/$1/ # zh, ch, sh => z, c, s
    - derive/^([zcs])([^h])/$1h$2/ # z, c, s => zh, ch, sh
    - derive/([i])ng$/$1n/ # ing => in
    - derive/([i])n$/$1ng/ # in => ing
    - derive/^l/n/ # n â†’ l
    - derive/^n/l/ # l â†’ n
    # é€‰æ‹©1ï¼šåªç”¨åŒæ‹¼
    - erase/^xx$/
    - derive/^([jqxy])u$/$1v/
    - derive/^([aoe])([ioun])$/$1$1$2/
    - xform/^([aoe])(ng)?$/$1$1$2/
    - xform/iu$/â“†/
    - xform/(.)ei$/$1â“Œ/
    - xform/uan$/â“‡/
    - xform/[uv]e$/â“‰/
    - xform/un$/â“/
    - xform/^sh/â“Š/
    - xform/^ch/â’¾/
    - xform/^zh/â“‹/
    - xform/uo$/â“„/
    - xform/ie$/â“…/
    - xform/(.)i?ong$/$1â“ˆ/
    - xform/ing$|uai$/â“€/
    - xform/(.)ai$/$1â’¹/
    - xform/(.)en$/$1â’»/
    - xform/(.)eng$/$1â’¼/
    - xform/[iu]ang$/â“/
    - xform/(.)ang$/$1â’½/
    - xform/ian$/â“‚/
    - xform/(.)an$/$1â’¿/
    - xform/(.)ou$/$1â“/
    - xform/[iu]a$/â“/
    - xform/iao$/â“ƒ/
    - xform/(.)ao$/$1â’¸/
    - xform/ui$/â“‹/
    - xform/in$/â’·/
    - xlit/â“†â“Œâ“‡â“‰â“â“Šâ’¾â“„â“…â“ˆâ’¹â’»â’¼â’½â’¿â“€â“â“â“â’¸â“‹â’·â“ƒâ“‚/qwrtyuiopsdfghjklzxcvbnm/
    # # é€‰æ‹©2ï¼šåŒæ‹¼å…¨æ‹¼æ··ç”¨
    # # https://github.com/iDvel/rime-ice/issues/525
    # - erase/^xx$/
    # - derive/^([jqxy])u$/$1v/
    # - derive/^([aoe])([ioun])$/$1$1$2/
    # - derive/^([aoe])(ng)?$/$1$1$2/
    # - derive/iu$/â“†/
    # - derive/(.)ei$/$1â“Œ/
    # - derive/uan$/â“‡/
    # - derive/[uv]e$/â“‰/
    # - derive/un$/â“/
    # - derive/^sh/â“Š/
    # - derive/^ch/â’¾/
    # - derive/^zh/â“‹/
    # - derive/uo$/â“„/
    # - derive/ie$/â“…/
    # - derive/(.)i?ong$/$1â“ˆ/
    # - derive/ing$|uai$/â“€/
    # - derive/(.)ai$/$1â’¹/
    # - derive/(.)en$/$1â’»/
    # - derive/(.)eng$/$1â’¼/
    # - derive/[iu]ang$/â“/
    # - derive/(.)ang$/$1â’½/
    # - derive/ian$/â“‚/
    # - derive/(.)an$/$1â’¿/
    # - derive/(.)ou$/$1â“/
    # - derive/[iu]a$/â“/
    # - derive/iao$/â“ƒ/
    # - derive/(.)ao$/$1â’¸/
    # - derive/ui$/â“‹/
    # - derive/in$/â’·/
    # - xlit/â“†â“Œâ“‡â“‰â“â“Šâ’¾â“„â“…â“ˆâ’¹â’»â’¼â’½â’¿â“€â“â“â“â’¸â“‹â’·â“ƒâ“‚/qwrtyuiopsdfghjklzxcvbnm/
    #
    # - abbrev/^(.).+$/$1/  # é¦–å­—æ¯ç®€æ‹¼ï¼Œå¼€å¯åä¼šå¯¼è‡´ 3 ä¸ªå­—æ¯æ—¶ kj'x å˜æˆ k'jx çš„é—®é¢˜
