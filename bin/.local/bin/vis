#!/bin/bash

print_usage() {
	cat <<EOF
$(basename $0) -- vim different targets

Usage: $(basename $0)
       -h to print this usage
       -2 to edit $HOME/Dotfiles.d/todo.org
       -b to edit $HOME/.bashrc
       -B to edit $HOME/.bash_aliases
       -d to vim diff
       -c to edit $HOME/Dotfiles.d/misc/clang-format-c-cpp
       -e to edit $EMACS_EL
       -f to edit $FISHRC
       -F to edit file disabling format_on_save
       -t to edit $HOME/.config/tmux/tmux.conf
       -T to edit $HOME/.config/tig/config
       -a to edit $HOME/.config/alacritty/alacritty.yml
       -k to edit $HOME/.config/kitty/kitty.conf
       -R to edit $HOME/.config/rofis
       -s to edit $HOME/.config/sxhkd/sxhkdrc
       -u to vim -U NONE $@
       -U to vim -u $HOME/Dotfiles.d/vim/vimrc.more $@
       -m to vim $HOME/Dotfiles.d/misc/cmake-format.json
       -M to vim $HOME/.config/mpv
       -v to edit $HOME/.config/lvim/config.lua
       -o to vim $HOME/Dotfiles.d.d/vim/.vimrc
       -r to sudo edit
       -i to vim $HOME/.config/i3/config
EOF
	exit 0
}

EMACS_EL="$HOME/.spacemacs.d/init.el"
FISHRC="$HOME/.config/fish/config.fish"
cmd=vim
file=$@
while getopts ":2bBdcefFtTaksuUmMoOvrRi" args; do # prefix-: no warning for illegal option
	case "$args" in
	h | \?)
		print_usage
		;;
	2)
		file="$HOME/Dotfiles.d/todo.org"
		;;
	b)
		file="$HOME/.bashrc"
		;;
	B)
		file="$HOME/.bash_aliases"
		;;
	d)
		shift
		if [ "$#" -eq 1 ]; then
			eval $cmd -c "Gvdiffsplit!" $1
			exit
		fi
		if [ -f $1 ]; then
			eval $cmd -d -o $1 $2
		elif [ -d $1 ]; then
			eval $cmd -c "DirDiff $1 $2"
		fi
		exit
		;;
	c)
		file="$HOME/Dotfiles.d/misc/clang-format-c-cpp"
		;;
	e)
		file=$EMACS_EL
		;;
	f)
		file=$FISHRC
		;;
	F) # disable format_on_save using lunarvim, or toggle it inside lunarvim before saving it
		shift
		lvim +LvimToggleFormatOnSave "$@"
		exit
		;;
	t)
		eval $cmd $HOME/.config/tmux/tmux.conf && tmux source-file $HOME/.config/tmux/tmux.conf && echo $HOME/.config/tmux/tmux.conf reloaded!
		exit
		;;
	T)
		file="$HOME/.config/tig/config"
		;;
	a)
		file="$HOME/.config/alacritty/alacritty.yml"
		;;
	k)
		file="$HOME/.config/kitty/kitty.conf"
		;;
	s)
		file="$HOME/.config/sxhkd/sxhkdrc"
		;;
	u)
		cmd="vim -u NONE -c 'nmap q :q!<CR>'"
		shift
		file=$@
		;;
	U)
		cmd="vim -u $HOME/Dotfiles.d/vim/vimrc.more"
		shift
		file=$@
		;;
	m)
		file="$HOME/Dotfiles.d/misc/cmake-format.json"
		;;
	M)
		file="$HOME/.config/mpv"
		;;
	o)
		file="$HOME/Dotfiles.d/vim/.vimrc"
		;;
	O)
		file="$HOME/Dotfiles.d/vim/vimrc.more"
		;;
	v)
		file="$HOME/.config/lvim/config.lua"
		;;
	r)
		shift
		sudo -E vim $@
		exit
		;;
	R)
		file="$HOME/.local/bin/rofis"
		;;
	i)
		file="$HOME/.config/i3/config"
		;;
	esac
done
shift
num=$@

eval $cmd $file $num
