#!/bin/bash

INTERFACE=$(ip route get 8.8.8.8 | awk -- '{printf $5}')

while true; do
	FILE="/sys/class/net/$INTERFACE/statistics"
	RX=$(cat $FILE/rx_bytes)
	TX=$(cat $FILE/tx_bytes)

	sleep 1

	RXN=$(cat $FILE/rx_bytes)
	TXN=$(cat $FILE/tx_bytes)

	RXDIF=$(echo $((RXN - RX)))
	TXDIF=$(echo $((TXN - TX)))

	if [ "$RXDIF" -lt 10240 ]; then
		echo -n
	elif [ "$RXDIF" -gt 1048576 ]; then
		echo -e " <$(awk -v RXDIF="$RXDIF" 'BEGIN { printf "%.0f", (RXDIF / 1048576) }')M/s $((TXDIF / 1024))K/s> "
	else
		echo -e " <$(($RXDIF / 1024))K/s $((TXDIF / 1024))K/s> "
	fi
done
